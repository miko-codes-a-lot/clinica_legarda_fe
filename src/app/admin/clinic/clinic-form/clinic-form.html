<form [formGroup]="rxform" (ngSubmit)="onSubmit()">  
  <label for="name">Name </label>
  <input formControlName="name" id="name">
  <app-form-control-errors [control]="rxform.get('name')"></app-form-control-errors>
  <br>

  <label for="address">Address </label>
  <input formControlName="address" id="address">
  <app-form-control-errors [control]="rxform.get('address')"></app-form-control-errors>
  <br>

  <label for="mobileNumber">Mobile Number </label>
  <input formControlName="mobileNumber" id="mobileNumber" placeholder="+639123456789">
  <app-form-control-errors [control]="rxform.get('mobileNumber')" [customMessage]="'Use only digits after +63 (e.g. +639123456789).'"></app-form-control-errors>
  <br>

  <label for="emailAddress">Email Address </label>
  <input formControlName="emailAddress" id="emailAddress">
  <app-form-control-errors [control]="rxform.get('emailAddress')"></app-form-control-errors>
  <br>

  <div formArrayName="operatingHours">
    @for (hour of this.operatingHours.controls; track $index) {
      <div [formGroupName]="$index">
        <span>Day </span> 
        <select [id]="'day' + $index" [name]="'day' + $index" formControlName="day"
          [disabled]="true"
        >
          @for (day of getDayOptions($index); track day.code) {
            <option [value]="day.code">{{ day.label }}</option>
          }
        </select>
        <span> Hours </span>
        <input type="time" formControlName="startTime" [id]="'startTime' + $index">
        <span>-</span>
        <input type="time" formControlName="endTime" [id]="'endTime' + $index">

        @if (hour.errors?.['timeRangeInvalid'] && (hour.touched || hour.dirty)) {
          <div class="error">
            End time must be after start time.
          </div>
        }
      </div> <br>
    }
  </div>

  <button [disabled]="isLoading || !rxform.valid">Save</button>
</form>