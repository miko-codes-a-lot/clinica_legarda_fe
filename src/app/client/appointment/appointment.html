
  <div class="appointment-hero">
    <h1>Book an Appointment</h1>
    <p>Schedule your visit at <strong>Clinica Legarda</strong>.</p>
  </div>
  @if (!user) {
    <div class="container">
      <div class="login-required">
        <h2>You must log in to book an appointment</h2>
        <p>Please sign in to continue.</p>
        <a [routerLink]="'/app/login'" class="btn-service">Proceed to Login</a>
      </div>
    </div>
  } @else {
    <app-form
      [form]="rxform"
      [fields]="appointmentFields" 
      [isLoading]="isLoading"
      (onSubmitEvent)="onSubmit()"
    >
        <form [formGroup]="rxform">
            @if (selectedDentist) {
              <app-date-picker 
                formControlName="date"
                label="Appointment Day"
                placeholder="Choose a date"
                [dentist]="selectedDentist">
              </app-date-picker> <br>

              <app-time-picker
                label="Appointment Time"
                [dentist]="selectedDentist"
                [selectedDate]="date.value"
                [serviceDuration]="60"
                [timeSlotInterval]="30"
                [required]="true"
                formControlName="time"
              >
              </app-time-picker>
              <div class="summary">
                <p><strong>Total Duration:</strong> {{ getFormattedDuration() }}</p>
                <p><strong>Time:</strong> {{ getAppointmentTimeRange() }}</p>
              </div>
            }
          </form>
    </app-form>
  }
